<!DOCTYPE html>
<html lang="pt-MZ">

<head>
    <meta charset="utf-8">
    <title>Reservas - Churrasqueira PAMIJU</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Reservar mesa, Churrasqueira PAMIJU, Chimoio" name="keywords">
    <meta content="Reserve a sua mesa online na Churrasqueira PAMIJU." name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Times+New+Roman:wght@400;700&family=Heebo:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Estilo personalizado para a mensagem do formulário (ADICIONADO) -->
    <style>
        :root {
            --green-accent: #C3E6CB;
            --dark-text: #155724;
            --red-accent: #F8D7DA;
            --light-text: #721C24;
        }
        #form-message {
            display: none; 
            padding: 10px; 
            border-radius: 5px; 
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
        }
        #form-message.success {
            background-color: var(--green-accent);
            color: var(--dark-text);
        }
        #form-message.error {
            background-color: var(--red-accent);
            color: var(--light-text);
        }
    </style>
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">A carregar...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0">
            <nav class="navbar navbar-expand-lg navbar-dark px-4 px-lg-5 py-3 py-lg-0">
                <a href="index.html" class="navbar-brand p-0">
                    <!-- MODIFICAÇÃO 1: LOGO COM IMAGEM -->
                    <h1 class="m-0">
                        <img src="img/SEU-ICONE-Y1.png" alt="Logo" style="height: 32px; width: auto; margin-right: 10px; margin-bottom: 5px;">
                        Churrasqueira PAMIJU
                    </h1>
                </a>
                <!-- MODIFICAÇÃO 2: BOTÃO REVERTIDO PARA O NORMAL -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0 pe-4">
                        <a href="index.html" class="nav-item nav-link">Início</a>
                        <a href="about.html" class="nav-item nav-link">Sobre</a>
                        <a href="service.html" class="nav-item nav-link">Serviços</a>
                        <a href="menu.html" class="nav-item nav-link">Cardápio</a>
                        <a href="booking.html" class="nav-item nav-link active">Reservas</a> <!-- Link Ativo -->
                        <a href="contact.html" class="nav-item nav-link">Localização</a>
                        <a href="contact.html" class="nav-item nav-link">Contacto</a>
                    </div>
                    <a href="booking.html" class="btn btn-primary py-2 px-4">Reservar Mesa</a>
                </div>
            </nav>

            <div class="container-xxl py-5 bg-dark hero-header mb-5">
                <div class="container text-center my-5 pt-5 pb-4">
                    <h1 class="display-3 text-white mb-3 animated slideInDown">Reservas</h1>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb justify-content-center text-uppercase">
                            <li class="breadcrumb-item"><a href="index.html">Início</a></li>
                            <li class="breadcrumb-item text-white active" aria-current="page">Reservas</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        <!-- Navbar & Hero End -->


        <!-- Reservation Start -->
        <div class="container-xxl py-5 px-0 wow fadeInUp" data-wow-delay="0.1s">
            <div class="row g-0">
                <div class="col-md-6">
                     <!-- *** Trocar esta imagem por uma do teu espaço *** -->
                    <img src="img/img3.jpeg" class="img-fluid" alt="Nosso espaço" style="object-fit: cover; height: 100%; min-height: 400px; width: 100%;">
                </div>
                <div class="col-md-6 bg-dark d-flex align-items-center" style="background: var(--dark-brown);">
                    <div class="p-5 wow fadeInUp" data-wow-delay="0.2s">
                        <h5 class="section-title ff-secondary text-start text-primary fw-normal">Reservas</h5>
                        <h1 class="text-white mb-4">Reserve a sua Mesa Online</h1>
                        
                        <!-- 
                            MODIFICAÇÕES PARA O FIREBASE:
                            1. Adicionado id="bookingForm" ao <form>
                            2. Adicionado 'required' aos campos
                            3. Adicionado id="submitButton" ao botão
                            4. Adicionado o div #form-message
                        -->
                        
                        <form id="bookingForm"> <!-- MODIFICAÇÃO 1 -->
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="name" placeholder="Seu Nome" required> <!-- MODIFICAÇÃO 2 -->
                                        <label for="name">Seu Nome</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="email" class="form-control" id="email" placeholder="Seu Email" required> <!-- MODIFICAÇÃO 2 -->
                                        <label for="email">Seu Email</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating date" id="date3" data-target-input="nearest">
                                        <input type="text" class="form-control datetimepicker-input" id="datetime" placeholder="Data e Hora" data-target="#date3" data-toggle="datetimepicker" required /> <!-- MODIFICAÇÃO 2 -->
                                        <label for="datetime">Data e Hora</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="select1" required> <!-- MODIFICAÇÃO 2 -->
                                          <option value="1">1 Pessoa</option>
                                          <option value="2">2 Pessoas</option>
                                          <option value="3">3 Pessoas</option>
                                          <option value="4">4 Pessoas</option>
                                          <option value="5">5+ Pessoas</option> <!-- O script vai guardar "5" -->
                                        </select>
                                        <label for="select1">Nº de Pessoas</label>
                                      </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-floating">
                                        <textarea class="form-control" placeholder="Pedido Especial" id="message" style="height: 100px"></textarea>
                                        <label for="message">Pedido Especial (opcional)</label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-primary w-100 py-3" type="submit" id="submitButton">Reservar Agora</button> <!-- MODIFICAÇÃO 3 -->
                                </div>

                                <!-- Mensagem de Sucesso/Erro para o Firebase (ADICIONADO) -->
                                <div class="col-12">
                                    <div id="form-message"></div> <!-- MODIFICAÇÃO 4 -->
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Reservation End -->
        

        <!-- Footer Start -->
        <div class="container-fluid footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-4 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">A Churrasqueira</h4>
                        <p>O verdadeiro sabor do churrasco moçambicano, feito com paixão e tradição em Chimoio.</p>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Contacto</h4>
                        <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>VFQF+744, Rua Dos Trabalhadores, Chimoio</p>
                        <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+258 86 133 7779</p>
                        <p class="mb-2"><i class="fa fa-envelope me-3"></i>churrasqueirapamiju5@gmail.com</p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href="#"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#"><i class="fab fa-instagram"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#"><i class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Horário</h4>
                        <h5 class="text-light fw-normal">Segunda - Domingo</h5>
                        <p>07:00 - 22:00</p>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="#">Churrasqueira PAMIJU</a>, Todos os Direitos Reservados.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script> <!-- O SEU SCRIPT ORIGINAL (MANTIDO) -->


    <!-- ****************************************************** -->
    <!-- ***** SCRIPT FIREBASE PARA RESERVAS (ADICIONADO) ***** -->
    <!-- ****************************************************** -->
    <script type="module">
        // Importar as funções necessárias da Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // 1. COLA A TUA FIREBASE CONFIG AQUI
        // (Vem do Passo 10 do "Dever de Casa" no site da Firebase)
       // Your web app's Firebase configuration
        const firebaseConfig = {
        apiKey: "AIzaSyCTGjhQXbEKSect3oBibPyvCUZEFUdLSPQ",
        authDomain: "pamijureservas.firebaseapp.com",
        projectId: "pamijureservas",
        storageBucket: "pamijureservas.firebasestorage.app",
        messagingSenderId: "499850653729",
        appId: "1:499850653729:web:a806f68d13fe4764c07360"
        };


        // Inicializar a Firebase
        const app = initializeApp(firebaseConfig);
        // Ligar à base de dados Firestore
        const db = getFirestore(app);

        // Selecionar o formulário e os elementos de mensagem
        const bookingForm = document.getElementById('bookingForm');
        const submitButton = document.getElementById('submitButton');
        const formMessage = document.getElementById('form-message');

        // Adicionar um "ouvinte" ao formulário
        bookingForm.addEventListener('submit', async (e) => {
            // 1. Impedir o envio padrão do HTML
            e.preventDefault();

            // 2. Mudar o texto do botão e mostrar que está a carregar
            submitButton.disabled = true;
            submitButton.innerText = 'A enviar reserva...';
            formMessage.style.display = 'none';
            formMessage.classList.remove('success', 'error');

            try {
                // 3. Recolher os dados do formulário
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const datetime = document.getElementById('datetime').value;
                const people = document.getElementById('select1').value; // Usar "select1"
                const message = document.getElementById('message').value;

                // 4. Enviar os dados para a Firebase
                const docRef = await addDoc(collection(db, "reservas"), {
                    nome: name,
                    email: email,
                    dataHora: datetime,
                    pessoas: people,
                    mensagem: message,
                    estado: "Pendente",
                    criadoEm: serverTimestamp()
                });

                // 5. Mostrar mensagem de sucesso
                formMessage.innerText = 'Reserva enviada com sucesso! Entraremos em contacto.';
                formMessage.classList.add('success');
                formMessage.style.display = 'block';

                // 6. Limpar o formulário e reativar o botão
                bookingForm.reset();
                submitButton.disabled = false;
                submitButton.innerText = 'Reservar Agora';

            } catch (error) {
                // 7. Mostrar mensagem de erro se falhar
                console.error("Erro ao adicionar reserva: ", error);
                formMessage.innerText = 'Erro ao enviar a reserva. Por favor, tente novamente ou ligue para nós.';
                formMessage.classList.add('error');
                formMessage.style.display = 'block';

                // 8. Reativar o botão
                submitButton.disabled = false;
                submitButton.innerText = 'Reservar Agora';
            }
        });

    </script>
    <!-- ****************************************************** -->
    <!-- ***** SCRIPT FIREBASE PARA RESERVAS (FIM) ******** -->
    <!-- ****************************************************** -->
</body>

</html>

